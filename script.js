

// Sample event data (replace with your actual event data)
const events = [
    { 
        id: 1, 
        title: "EducationUSA Indonesia Fair", 
        date: "October 13, 2024", 
        category: "knowledge", 
        image: "EducationUSA.jpg", 
        description: `🎓 Meet with representatives from various top universities in the United States
👥 Consultation with EducationUSA Advisors and networking with alumni graduates from the United States
🌟 Information on scholarship opportunities, study preparation, campus majors and the college environment in the US

Join EducationUSA Indonesia Fair at :
🗓 October 13, 2024
📍The Westin Surabaya Hotel
🕐 13:00-16:30 WIB`
    },
    { 
        id: 2, 
        title: "Jadi Gini Belajar Bersama", 
        date: "October 26, 2024", 
        category: "knowledge", 
        image: "JGBB.webp", 
        description: `Interested in learning marketing strategies? How to determine the right target market? Don't know where to start when challenges arise? Let's recharge together!

This class is about how to build a brand and develop marketing strategies. Not only learning from Mas Didiet Maulana, you can also learn from other creative and innovative participants. The class will also provide an opportunity for participants to have their products reviewed by Mas Didiet.

Save the date and place:
📝 Saturday, October 26, 2024
⏱ 10.00 AM - 12.00 PM
📍Intiland tower lt. MZ, Borneo Room, Panglima Sudirman Street No.101-103
You can register directly at the link bit.ly/jgbbsurabaya2024 or contact the admin at +62 896-5307-6891`
    },
    { 
        id: 3, 
        title: "K-POP Party Noraebang", 
        date: "October 26-27, 2024", 
        category: "music", 
        image: "KPARTY.jpg", 
        description: `[NORAEBANG!!!]

ANNYeOong YeOroOObuN!!🫵💃

Let's have a kpop party at @websvaganza and make some wonderful memories with us! 💗✨
__

[FREE ENTRY‼️]

📌Galaxy Exhibition Center, 6th floor
🗓26 Oktober 2024
we can't wait to see you really soon adventurepreneurs! 🧙‍♀

Registration Form Link
bit.ly/NoraebangInWEBSVAGANZA`
    },
    { 
        id: 4, 
        title: "Halloween and Karaoke Night Party with Taylor Swift Songs", 
        date: "October 26, 2024", 
        category: "music", 
        image: "HALLOWEEN.webp", 
        description: `LUNESSE BEAUTY CIRCLE PRESENTS

HALLOWEEN PARTY AND KARAOKE NIGHT 🎃

Open call for SWIFTIES!!!
Come to our Halloween and Karaoke Night Party “TRICK OR TREAT” with Taylor Swift Songs.

🗓 Date Saturday, October 26, 2024
⌚️ Time: 17.00 - 21.00 WIB
📍Place: Lunesse, Jalan Diponegoro No. 168, Tegalsari sub-district, Surabaya

HTM: Rp. 65.000,-/person
Free of charge:
- Product package (Lip Sleeping Mask/Moist & Handshield)
- Free Parking
- Free Drinks
- Free Documentation
- Gifts & Doorprizes

Special Prizes for 3 Best Costumes 🧛🏻

Registration Link 👇🏻
https://forms.gle/5YAd4d159xTsKdyXA

We look forward to seeing you in your unique costumes🧟`
    },
    { 
        id: 5, 
        title: "Mogmain Festival", 
        date: "October 11-13, 2024", 
        category: "festival", 
        image: "MOGMAIN.webp", 
        description: `✨MOGMAIN FESTIVAL ARE YOU READY?!✨

🗓 October 11 - 13, 2024
📍 Convention Hall, @galaxymallsby 2, 6th Floor
⏰ 09.00 - 22.00 WIB
☎️/WA : +62 851 5788 1280
🍱 Tenant : +62 822 9993 8848

Register now at @mogmainfest and let's have fun together there 🙌

1. 3X3 COMPETITION
2. K-POP DANCE
3. BAND COMPETITION
4. E-SPORTS COMPETITION
5. SMART CHALLENGE
6. COLORING COMPETITION
7. COACHING CLINIC WITH abrahamdg_ by : @4thelab.id
8. 100 TENANT BAZAAR (OPEN)
9. OPEN SPONSORS

See you! 🏀💃❤️

https://linktr.ee/MogmainFest`
    },
    { 
        id: 6, 
        title: "Gut Health, Mind Wealth : Nurturing Your Gut for Healthier & Happier Mind", 
        date: "October 12, 2024", 
        category: "knowledge", 
        image: "GUT.webp", 
        description: `Digestion problems? Stomach often feels uncomfortable?
Let's know how to maintain your digestive health by joining the National Awam Seminar with Prodia with the theme:
“Gut Health, Mind Wealth: Nurturing Your Gut for Healthier & Happier Mind”

Speaker:
- dr. Ulfa Kholili, Sp.PD-KGEH
- Nur Ainsyah Oktavia, S.Si, M.M

Day/Date : Saturday, October 12, 2024
Time : 10:00 am - 1:00 pm
Place : Resto Bu Rudy - Hall Level 3, Jl. Dharmahusada No.144 Surabaya

Get free examination vouchers, goodie bags, and various other interesting door prizes.

Registration fee :
Rp 25,000/person or Rp 40,000/2 persons
Register now: https://link.prodia.co.id/SemNasAwamProdiaSBY

More info (WA only):
Fanie : 0821-3333-9956
Dewi : 0812-4901-6200
Ika : 0857-3085-8474`
    },
    { 
        id: 7, 
        title: "KulineRUN 2025", 
        date: "Coming Soon 2025", 
        category: "festival", 
        image: "KULINERUN.jpg", 
        description: `🍽️👟 Get Ready, Surabaya! ✨️
The hit event of running while culinary is coming soon!

KulineRun 2025 is ready to provide an exciting experience for those of you who like to run but also really like to eat. Complete only at this event!

Early Bird Period: Oct 1 - Oct 31, 2024
Register immediately at www.kulinerun.com

Follow & get more info only here
@kulinerun_id`
    },
    {
        id: 8, 
        title: "PRJ Surabaya 2024", 
        date: "October 18-27, 2024", 
        category: "festival", 
        image: "PRJ.jpg", 
        description: `𝙂𝙚𝙩 𝙍𝙚𝙖𝙙𝙮 𝙛𝙤𝙧 𝙋𝙍𝙅 𝙎𝙪𝙧𝙖𝙗𝙖𝙮𝙖 𝟮𝟬𝟮𝟰! 🥳🎉

The most complete exhibition with 𝗽𝗿𝗼𝗺𝗼 𝗯𝗲𝘀𝗮𝗿-𝗯𝗲𝘀𝗮𝗿𝗮𝗻 𝗱𝗮𝗿𝗶 𝟭𝟳𝟬++ 𝗯𝗿𝗮𝗻𝗱-𝗯𝗿𝗮𝗻𝗱 𝘁𝗲𝗿𝗻𝗮𝗺𝗮 that you can't miss! 🤩

Let's get ready to welcome the excitement and festivity of PRJ 2024!
Save the date and location👇
-
📍Grand City Convention & Exhibition Surabaya
📅 October 18 - 27, 2024
🕒 Weekday: 15.00-22.00
🕚 Weekend: 11.00-22.00
Buy tickets at BBO / Link in bio / bit.ly/TIKETPRJ`
    },
    // Add more events as needed
];

const eventsContainer = document.querySelector('.events-container');
const categoryButtons = document.querySelectorAll('.category-btn');
const modal = document.getElementById('eventModal');
const modalImage = modal.querySelector('.modal-image');
const modalTitle = modal.querySelector('.modal-title');
const modalDescription = modal.querySelector('.modal-description');
const closeModal = modal.querySelector('.close');
const searchForm = document.getElementById('search-form');
const searchResults = document.getElementById('search-results');
const resultCount = document.getElementById('result-count');

function createEventCard(event) {
    const card = document.createElement('div');
    card.className = 'event-card';
    card.setAttribute('data-category', event.category);
    card.innerHTML = `
        <img src="${event.image}" alt="${event.title}">
        <div class="event-info">
            <h3 class="event-title">${event.title}</h3>
            <p class="event-date">${event.date}</p>
        </div>
    `;
    card.addEventListener('click', () => showEventDetails(event));
    return card;
}

function showEventDetails(event) {
    modalImage.src = event.image;
    modalImage.alt = event.title;
    modalTitle.textContent = event.title;
    modalDescription.innerHTML = event.description.replace(/\n/g, '<br>');
    modal.style.display = 'block';
}

function filterEvents(category) {
    const cards = eventsContainer.querySelectorAll('.event-card');
    cards.forEach(card => {
        if (category === 'all' || card.getAttribute('data-category') === category) {
            card.style.display = 'block';
        } else {
            card.style.display = 'none';
        }
    });
}

function searchEvents(query) {
    query = query.toLowerCase();
    const filteredEvents = events.filter(event => 
        event.title.toLowerCase().includes(query) ||
        event.description.toLowerCase().includes(query)
    );
    displaySearchResults(filteredEvents, query);
}

function displaySearchResults(results, query) {
    eventsContainer.innerHTML = '';
    searchResults.style.display = 'block';
    resultCount.textContent = `Found ${results.length} event${results.length !== 1 ? 's' : ''} for "${query}"`;
    
    results.forEach(event => {
        eventsContainer.appendChild(createEventCard(event));
    });

    // Reset category buttons
    categoryButtons.forEach(btn => btn.classList.remove('active'));
    document.querySelector('.category-btn[data-category="all"]').classList.add('active');
}

// Initialize event cards
function initializeEvents() {
    eventsContainer.innerHTML = '';
    events.forEach(event => {
        eventsContainer.appendChild(createEventCard(event));
    });
}

// Category button click handlers
categoryButtons.forEach(button => {
    button.addEventListener('click', () => {
        categoryButtons.forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');
        filterEvents(button.getAttribute('data-category'));
        searchResults.style.display = 'none';
    });
});

// Close modal
closeModal.addEventListener('click', () => {
    modal.style.display = 'none';
});

window.addEventListener('click', (event) => {
    if (event.target === modal) {
        modal.style.display = 'none';
    }
});

// Search form submit handler
searchForm.addEventListener('submit', (e) => {
    e.preventDefault();
    const searchQuery = e.target.querySelector('input[name="q"]').value.trim();
    if (searchQuery) {
        if (window.location.pathname.includes('findevents.html')) {
            searchEvents(searchQuery);
        } else {
            window.location.href = `findevents.html?q=${encodeURIComponent(searchQuery)}`;
        }
    }
});

// Check for search query in URL and initialize events
window.addEventListener('load', () => {
    const urlParams = new URLSearchParams(window.location.search);
    const searchQuery = urlParams.get('q');
    if (searchQuery) {
        document.querySelector('input[name="q"]').value = searchQuery;
        searchEvents(searchQuery);
    } else {
        initializeEvents();
    }
});